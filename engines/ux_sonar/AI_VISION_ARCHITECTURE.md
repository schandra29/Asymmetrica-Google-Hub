# AI Vision Engine Architecture

## Data Flow Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BROWSER (AsymmBill)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Performance APIs                                         â”‚   â”‚
â”‚  â”‚  - PerformanceObserver (CLS, Long Tasks, Paint)         â”‚   â”‚
â”‚  â”‚  - requestAnimationFrame (FPS)                          â”‚   â”‚
â”‚  â”‚  - Animation API monitoring                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SONIC RADAR ENGINE                            â”‚
â”‚  Captures raw telemetry points:                                 â”‚
â”‚  - fps: { type: 'fps', value: 34.97, timestamp: 3662 }         â”‚
â”‚  - cls: { type: 'cls', value: 0, timestamp: 800 }              â”‚
â”‚  - paint: { type: 'paint', name: 'first-paint', ... }          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND COLLECTOR                            â”‚
â”‚  Aggregates metrics:                                            â”‚
â”‚  {                                                              â”‚
â”‚    metrics: {                                                   â”‚
â”‚      fps: 34.97,                                                â”‚
â”‚      cls: 0,                                                    â”‚
â”‚      longTasks: 0,                                              â”‚
â”‚      consoleErrors: 0,                                          â”‚
â”‚      requests: 24                                               â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TELEMETRY NORMALIZER                          â”‚
â”‚  Computes Asymmetrica metrics:                                  â”‚
â”‚  {                                                              â”‚
â”‚    metrics: {                                                   â”‚
â”‚      smoothnessIndex: 34.97  // fps / (1 + cls + longTasks)   â”‚
â”‚      energyEfficiency: 582.83 // perceivedResp / cpuTime       â”‚
â”‚      stabilizationTime: 0                                       â”‚
â”‚    },                                                           â”‚
â”‚    asymmetrica: {                                               â”‚
â”‚      regime: 'exploration'    // smoothness < 40               â”‚
â”‚      complexity: 'O(n)'        // based on animations/events   â”‚
â”‚    }                                                            â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      HEURISTICS ENGINE                           â”‚
â”‚  Rule-based analysis:                                           â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ low-fps: (m) => m.fps < 50                             â”‚   â”‚
â”‚  â”‚ Result: TRIGGERED (34.97 < 50) âŒ                      â”‚   â”‚
â”‚  â”‚ Severity: critical                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ high-cls: (m) => m.cls > 0.1                           â”‚   â”‚
â”‚  â”‚ Result: NOT TRIGGERED (0 < 0.1) âœ…                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  Output: [{ heuristic: 'low-fps', severity: 'critical', ... }] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CRITIQUE ADAPTER                             â”‚
â”‚  Generates AI critique:                                         â”‚
â”‚                                                                 â”‚
â”‚  1. For each triggered heuristic:                              â”‚
â”‚     - Generate code example                                     â”‚
â”‚     - Format message with metrics                               â”‚
â”‚                                                                 â”‚
â”‚  2. Compute scores:                                             â”‚
â”‚     - smoothnessScore = 34.97 Ã— 1.5 = 52.46                    â”‚
â”‚     - energyScore = min(582.83 Ã— 20, 100) = 100                â”‚
â”‚     - overallScore = (52.46 + 100) / 2 = 76.23                 â”‚
â”‚                                                                 â”‚
â”‚  3. Generate regime-based recommendations:                      â”‚
â”‚     - "exploration" â†’ "Focus on critical fixes"                â”‚
â”‚                                                                 â”‚
â”‚  Output: {                                                      â”‚
â”‚    summary: "âš ï¸ Found 1 critical issues...",                   â”‚
â”‚    issues: [...],                                               â”‚
â”‚    metrics: { overallScore: 76.23 },                           â”‚
â”‚    recommendations: [...]                                       â”‚
â”‚  }                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                            â”‚
        â†“                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REPORT GENERATOR    â”‚                  â”‚  CI INTEGRATION     â”‚
â”‚                      â”‚                  â”‚                     â”‚
â”‚  Markdown Report:    â”‚                  â”‚  PR Comment:        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ # UX Sonar     â”‚  â”‚                  â”‚  â”‚ ## ğŸ¦‡ Analysisâ”‚  â”‚
â”‚  â”‚                â”‚  â”‚                  â”‚  â”‚               â”‚  â”‚
â”‚  â”‚ Score: 76.23   â”‚  â”‚                  â”‚  â”‚ âŒ FAILED     â”‚  â”‚
â”‚  â”‚                â”‚  â”‚                  â”‚  â”‚               â”‚  â”‚
â”‚  â”‚ ## Issues      â”‚  â”‚                  â”‚  â”‚ ### Critical  â”‚  â”‚
â”‚  â”‚ 1. low-fps     â”‚  â”‚                  â”‚  â”‚ - low-fps     â”‚  â”‚
â”‚  â”‚                â”‚  â”‚                  â”‚  â”‚               â”‚  â”‚
â”‚  â”‚ ```js          â”‚  â”‚                  â”‚  â”‚ ### Recs      â”‚  â”‚
â”‚  â”‚ // code        â”‚  â”‚                  â”‚  â”‚ - Profile JS  â”‚  â”‚
â”‚  â”‚ ```            â”‚  â”‚                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                  â”‚                     â”‚
â”‚                      â”‚                  â”‚  shouldFailCI:      â”‚
â”‚  JSON Report:        â”‚                  â”‚  true (critical)    â”‚
â”‚  { critique, ... }   â”‚                  â”‚                     â”‚
â”‚                      â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Saved to:           â”‚
â”‚  reports/_.md        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BASELINE STORAGE                            â”‚
â”‚  Saves normalized telemetry + critique to:                      â”‚
â”‚  baselines/_.json                                               â”‚
â”‚                                                                 â”‚
â”‚  Used for future comparisons:                                   â”‚
â”‚  - Regression detection                                         â”‚
â”‚  - Trend analysis                                               â”‚
â”‚  - PR comment baseline deltas                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Heuristics Decision Tree

```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Metrics   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                â”‚                â”‚
                â†“                â†“                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ FPS < 50?     â”‚ â”‚ CLS > 0.1?    â”‚ â”‚ longTasks?   â”‚
        â”‚               â”‚ â”‚               â”‚ â”‚              â”‚
        â”‚ YES â†’ low-fps â”‚ â”‚ YES â†’ high-clsâ”‚ â”‚ YES â†’ check  â”‚
        â”‚ (critical)    â”‚ â”‚ (critical)    â”‚ â”‚   threshold  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                â”‚                â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â†“
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Issues    â”‚
                          â”‚   Array     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚                 â”‚
                        â†“                 â†“
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Critical? â”‚     â”‚   Warnings?  â”‚
                  â”‚           â”‚     â”‚              â”‚
                  â”‚ YES â†’ CI  â”‚     â”‚ Display in   â”‚
                  â”‚   FAIL    â”‚     â”‚ report only  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Scoring Algorithm

### Smoothness Score
```typescript
smoothnessIndex = fps / (1 + cls + longTaskPenalty)
smoothnessScore = min(smoothnessIndex Ã— 1.5, 100)

Example:
fps = 34.97, cls = 0, longTasks = 0
smoothnessIndex = 34.97 / (1 + 0 + 0) = 34.97
smoothnessScore = 34.97 Ã— 1.5 = 52.46
```

### Energy Score
```typescript
perceivedResponsiveness = fps / 60
cpuTime = longTasks > 0 ? longTasks / 1000 : 0.001
energyEfficiency = perceivedResponsiveness / cpuTime
energyScore = min(energyEfficiency Ã— 20, 100)

Example:
fps = 34.97, longTasks = 0
perceivedResponsiveness = 34.97 / 60 = 0.583
cpuTime = 0.001
energyEfficiency = 0.583 / 0.001 = 583
energyScore = min(583 Ã— 20, 100) = 100 (capped)
```

### Overall Score
```typescript
overallScore = (smoothnessScore + energyScore) / 2

Example:
overallScore = (52.46 + 100) / 2 = 76.23
```

---

## Regime Classification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                 â”‚
â”‚  IF cls > 0.1 OR smoothness < 40                â”‚
â”‚    â†’ exploration                                â”‚
â”‚    â†’ Focus: "Fix critical issues"               â”‚
â”‚                                                 â”‚
â”‚  ELSE IF smoothness >= 50 AND cls <= 0.05       â”‚
â”‚    â†’ stabilization                              â”‚
â”‚    â†’ Focus: "Maintain through monitoring"       â”‚
â”‚                                                 â”‚
â”‚  ELSE                                           â”‚
â”‚    â†’ optimization                               â”‚
â”‚    â†’ Focus: "Fine-tune performance"             â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example Classification:
```
smoothness = 34.97, cls = 0
â†’ smoothness < 40 â†’ exploration âœ…
```

---

## Code Example Generation

Each heuristic maps to a solution pattern:

### low-fps â†’ Layout Optimization
```javascript
// âŒ Bad: Animating layout properties
element.style.width = '100px'; // Causes reflow

// âœ… Good: Transform-based animation
element.style.transform = 'scaleX(1.5)'; // GPU-accelerated
```

### high-cls â†’ Space Reservation
```javascript
// âœ… Reserve space for dynamic content
<div style="min-height: 200px;">
  <img src="..." style="aspect-ratio: 16/9;" />
</div>
```

### long-tasks â†’ Task Splitting
```javascript
// âœ… Break up long tasks
function heavyWork() {
  for (let i = 0; i < items.length; i++) {
    if (i % 100 === 0) {
      await new Promise(resolve => setTimeout(resolve, 0));
    }
    processItem(items[i]);
  }
}
```

---

## CI/CD Integration Flow

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   PR Created    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  GitHub Actions â”‚
                    â”‚  runs tests     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  UX Sonar runs  â”‚
                    â”‚  AI Vision test â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Load baseline  â”‚
                    â”‚  (if exists)    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Compare scores â”‚
                    â”‚  Generate PR    â”‚
                    â”‚  comment        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
                    â†“                 â†“
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Score >= 80  â”‚   â”‚ Score < 60  â”‚
            â”‚ No critical  â”‚   â”‚ OR critical â”‚
            â”‚              â”‚   â”‚             â”‚
            â”‚ â†’ CI PASS âœ… â”‚   â”‚ â†’ CI FAIL âŒâ”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Example: Real AsymmBill Analysis

### Input (RTL Testing Platform):
```json
{
  "metrics": {
    "fps": 34.97,
    "cls": 0,
    "longTasks": 0
  }
}
```

### Processing:
```
1. Smoothness Index: 34.97 / (1 + 0 + 0) = 34.97
2. Energy Efficiency: (34.97/60) / 0.001 = 582.83
3. Regime: smoothness < 40 â†’ exploration
4. Heuristics:
   - low-fps: 34.97 < 50 âœ… TRIGGERED
   - high-cls: 0 < 0.1 âŒ
   - long-tasks: 0 < 100 âŒ
```

### Output:
```json
{
  "summary": "âš ï¸ Found 1 critical issues and 0 warnings. FPS: 35.0, CLS: 0.000. Regime: exploration.",
  "issues": [
    {
      "type": "low-fps",
      "severity": "critical",
      "description": "Frame rate below optimal (34.97 FPS, target: 60)",
      "suggestion": "Use transform/opacity for animations...",
      "codeExample": "..."
    }
  ],
  "metrics": {
    "smoothnessScore": 52.46,
    "energyScore": 100,
    "overallScore": 76.23
  }
}
```

### CI Decision:
```
shouldFailCI = true (critical issue detected)
Verdict: âŒ FAILED
```

---

## Performance Impact

### Telemetry Collection Overhead:
- **FPS monitoring**: ~0.1% CPU (requestAnimationFrame)
- **CLS monitoring**: ~0.05% CPU (PerformanceObserver)
- **Total overhead**: < 1% on target application

### Analysis Performance:
- **Heuristics evaluation**: < 1ms
- **Critique generation**: < 5ms
- **Report generation**: < 10ms
- **Total analysis time**: < 20ms

### Storage:
- **Per test run**: ~5KB (JSON baseline)
- **Markdown report**: ~1-2KB

---

**This architecture gives AI "HD Vision" into software UX performance! ğŸ¤–ğŸ”**
